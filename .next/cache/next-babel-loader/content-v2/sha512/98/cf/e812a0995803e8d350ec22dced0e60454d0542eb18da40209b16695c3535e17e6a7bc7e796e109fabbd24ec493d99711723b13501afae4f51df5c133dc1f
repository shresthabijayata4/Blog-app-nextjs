{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/bijayata/Downloads/nextjs-firebase-blog-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/bijayata/Downloads/nextjs-firebase-blog-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/bijayata/Downloads/nextjs-firebase-blog-app/pages/blogs/[blogid].js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useState } from 'react';\nimport { db } from '../../firebase';\nimport { useRouter } from 'next/router';\nexport var __N_SSP = true;\nexport default function blogpage(_ref) {\n  _s();\n\n  var _this = this;\n\n  var blog = _ref.blog,\n      user = _ref.user,\n      allComments = _ref.allComments;\n\n  var _useState = useState(''),\n      myComment = _useState[0],\n      setMyComment = _useState[1];\n\n  var _useState2 = useState(allComments),\n      allCommentsBlog = _useState2[0],\n      setAllComments = _useState2[1];\n\n  var router = useRouter();\n  var blogid = router.query.blogid;\n\n  var makeCommet = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var commentQuery;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return db.collection('blogs').doc(blogid).collection('comments').add({\n                text: myComment,\n                name: user.displayName\n              });\n\n            case 2:\n              _context.next = 4;\n              return db.collection('blogs').doc(blogid).collection('comments').get();\n\n            case 4:\n              commentQuery = _context.sent;\n              setAllComments(commentQuery.docs.map(function (docSnap) {\n                return docSnap.data();\n              }));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function makeCommet() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"jsx-3461060680\" + \" \" + \"container center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"jsx-3461060680\",\n      children: blog.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"jsx-3461060680\",\n      children: [\"Created On - \", new Date(blog.createdAt).toDateString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: blog.imageUrl,\n      alt: blog.title,\n      className: \"jsx-3461060680\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"jsx-3461060680\",\n      children: blog.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-3461060680\" + \" \" + \"input-field\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"add a comment\",\n          value: myComment,\n          onChange: function onChange(e) {\n            return setMyComment(e.target.value);\n          },\n          className: \"jsx-3461060680\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick() {\n          return makeCommet();\n        },\n        className: \"jsx-3461060680\" + \" \" + \"btn fb8c00\",\n        children: \"Make comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"jsx-3461060680\",\n      children: \"please login to make comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"jsx-3461060680\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-3461060680\" + \" \" + \"left-align\",\n      children: allCommentsBlog.map(function (item) {\n        return /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"jsx-3461060680\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"jsx-3461060680\",\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 48\n          }, _this), \" \", item.text]\n        }, item.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 28\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"3461060680\",\n      children: \"span{font-weight:500;}body{color:orange;}img{width:100%;max-width:500px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2JpamF5YXRhL0Rvd25sb2Fkcy9uZXh0anMtZmlyZWJhc2UtYmxvZy1hcHAvcGFnZXMvYmxvZ3MvW2Jsb2dpZF0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0RpQixBQUdvQyxBQUlwQixBQUVlLFdBQ0ssRUFIbkIsR0FIQSxXQU9BIiwiZmlsZSI6Ii9ob21lL2JpamF5YXRhL0Rvd25sb2Fkcy9uZXh0anMtZmlyZWJhc2UtYmxvZy1hcHAvcGFnZXMvYmxvZ3MvW2Jsb2dpZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZVN0YXRlfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7ZGJ9IGZyb20gJy4uLy4uL2ZpcmViYXNlJ1xuaW1wb3J0IHt1c2VSb3V0ZXJ9IGZyb20gJ25leHQvcm91dGVyJ1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmxvZ3BhZ2Uoe2Jsb2csdXNlcixhbGxDb21tZW50c30pIHtcblxuICAgICBjb25zdCBbbXlDb21tZW50LHNldE15Q29tbWVudF0gPSB1c2VTdGF0ZSgnJylcbiAgICAgY29uc3QgW2FsbENvbW1lbnRzQmxvZyxzZXRBbGxDb21tZW50c10gPSB1c2VTdGF0ZShhbGxDb21tZW50cylcbiAgICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcbiAgICAgY29uc3QgeyBibG9naWQgfSA9IHJvdXRlci5xdWVyeVxuICAgICBjb25zdCBtYWtlQ29tbWV0ID0gYXN5bmMgKCk9PntcbiAgICAgICBcbiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbignYmxvZ3MnKS5kb2MoYmxvZ2lkKS5jb2xsZWN0aW9uKCdjb21tZW50cycpLmFkZCh7XG4gICAgICAgICAgICAgdGV4dDpteUNvbW1lbnQsXG4gICAgICAgICAgICAgbmFtZTp1c2VyLmRpc3BsYXlOYW1lXG4gICAgICAgICB9KVxuICAgICAgICBjb25zdCBjb21tZW50UXVlcnkgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdibG9ncycpLmRvYyhibG9naWQpLmNvbGxlY3Rpb24oJ2NvbW1lbnRzJykuZ2V0KClcbiAgICAgICAgc2V0QWxsQ29tbWVudHMoY29tbWVudFF1ZXJ5LmRvY3MubWFwKGRvY1NuYXA9PmRvY1NuYXAuZGF0YSgpKSlcblxuICAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgY2VudGVyXCI+XG4gICAgICAgICAgICA8aDI+e2Jsb2cudGl0bGV9PC9oMj5cbiAgICAgICAgICAgIDxoNT5DcmVhdGVkIE9uIC0ge25ldyBEYXRlKGJsb2cuY3JlYXRlZEF0KS50b0RhdGVTdHJpbmcoKX08L2g1PlxuICAgICAgICAgICAgPGltZyBzcmM9e2Jsb2cuaW1hZ2VVcmx9IGFsdD17YmxvZy50aXRsZX0gLz5cbiAgICAgICAgICAgIDxwPntibG9nLmJvZHl9PC9wPlxuXG4gICAgICAgICAgICB7dXNlcj9cbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWZpZWxkXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJhZGQgYSBjb21tZW50XCIgXG4gICAgICAgICAgICAgICAgdmFsdWU9e215Q29tbWVudH0gXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKT0+c2V0TXlDb21tZW50KGUudGFyZ2V0LnZhbHVlKX0vPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBmYjhjMDBcIiBvbkNsaWNrPXsoKT0+bWFrZUNvbW1ldCgpfT5NYWtlIGNvbW1lbnQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgOjxoMz5wbGVhc2UgbG9naW4gdG8gbWFrZSBjb21tZW50czwvaDM+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxociAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWZ0LWFsaWduXCI+XG5cbiAgICAgICAgICAgICAgICB7YWxsQ29tbWVudHNCbG9nLm1hcChpdGVtPT57XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8aDYga2V5PXtpdGVtLm5hbWV9PjxzcGFuPntpdGVtLm5hbWV9PC9zcGFuPiB7aXRlbS50ZXh0fTwvaDY+XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+XG4gICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICBzcGFue1xuICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDo1MDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJvZHl7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOm9yYW5nZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbWd7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7XG4gICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDo1MDBweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICBcbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKHtwYXJhbXM6e2Jsb2dpZH19KSB7XG4gICAgIGNvbnN0IHJlc3VsdCA9ICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdibG9ncycpLmRvYyhibG9naWQpLmdldCgpXG4gICAgIGNvbnN0IGFsbENvbW1ldHNTbmFwID0gYXdhaXQgZGIuY29sbGVjdGlvbignYmxvZ3MnKS5kb2MoYmxvZ2lkKS5jb2xsZWN0aW9uKCdjb21tZW50cycpLmdldCgpXG5cbiAgICBjb25zdCBhbGxDb21tZW50cyA9ICBhbGxDb21tZXRzU25hcC5kb2NzLm1hcChjb21Eb2NTbmFwPT5jb21Eb2NTbmFwLmRhdGEoKSlcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBibG9nOntcbiAgICAgICAgICAgICAgLi4ucmVzdWx0LmRhdGEoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OnJlc3VsdC5kYXRhKCkuY3JlYXRlZEF0LnRvTWlsbGlzKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsbENvbW1lbnRzXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG5cblxuXG4iXX0= */\\n/*@ sourceURL=/home/bijayata/Downloads/nextjs-firebase-blog-app/pages/blogs/[blogid].js */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n}\n\n_s(blogpage, \"vhHpJmdZ5g/cIHh60SVFpZxEsTc=\", false, function () {\n  return [useRouter];\n});","map":{"version":3,"sources":["/home/bijayata/Downloads/nextjs-firebase-blog-app/pages/blogs/[blogid].js"],"names":["useState","db","useRouter","blogpage","blog","user","allComments","myComment","setMyComment","allCommentsBlog","setAllComments","router","blogid","query","makeCommet","collection","doc","add","text","name","displayName","get","commentQuery","docs","map","docSnap","data","title","Date","createdAt","toDateString","imageUrl","body","e","target","value","item"],"mappings":"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","sourcesContent":["import {useState} from 'react'\nimport {db} from '../../firebase'\nimport {useRouter} from 'next/router'\nexport default function blogpage({blog,user,allComments}) {\n\n     const [myComment,setMyComment] = useState('')\n     const [allCommentsBlog,setAllComments] = useState(allComments)\n     const router = useRouter()\n     const { blogid } = router.query\n     const makeCommet = async ()=>{\n       \n        await db.collection('blogs').doc(blogid).collection('comments').add({\n             text:myComment,\n             name:user.displayName\n         })\n        const commentQuery = await db.collection('blogs').doc(blogid).collection('comments').get()\n        setAllComments(commentQuery.docs.map(docSnap=>docSnap.data()))\n\n     }\n    return (\n        <div className=\"container center\">\n            <h2>{blog.title}</h2>\n            <h5>Created On - {new Date(blog.createdAt).toDateString()}</h5>\n            <img src={blog.imageUrl} alt={blog.title} />\n            <p>{blog.body}</p>\n\n            {user?\n            <>\n            <div className=\"input-field\">\n                <input type=\"text\" \n                placeholder=\"add a comment\" \n                value={myComment} \n                onChange={(e)=>setMyComment(e.target.value)}/>\n            </div>\n            <button className=\"btn fb8c00\" onClick={()=>makeCommet()}>Make comment</button>\n            </>\n            :<h3>please login to make comments</h3>\n            }\n            \n            <hr />\n            <div className=\"left-align\">\n\n                {allCommentsBlog.map(item=>{\n                    return <h6 key={item.name}><span>{item.name}</span> {item.text}</h6>\n                })}\n            </div>\n\n            <style jsx global>\n                {`\n                span{\n                    font-weight:500;\n                }\n                body{\n                    color:orange\n                }\n                img{\n                    width:100%;\n                    max-width:500px;\n                }\n                `}\n            </style>\n            \n        </div>\n    )\n}\n\nexport async function getServerSideProps({params:{blogid}}) {\n     const result =  await db.collection('blogs').doc(blogid).get()\n     const allCommetsSnap = await db.collection('blogs').doc(blogid).collection('comments').get()\n\n    const allComments =  allCommetsSnap.docs.map(comDocSnap=>comDocSnap.data())\n    return {\n      props: {\n          blog:{\n              ...result.data(),\n              createdAt:result.data().createdAt.toMillis()\n          },\n          allComments\n      },\n    }\n  }\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}