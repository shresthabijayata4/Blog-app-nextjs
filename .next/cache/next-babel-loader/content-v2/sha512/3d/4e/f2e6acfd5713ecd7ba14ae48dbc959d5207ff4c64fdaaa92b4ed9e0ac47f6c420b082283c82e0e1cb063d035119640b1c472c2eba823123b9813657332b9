{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/bijayata/Downloads/nextjs-firebase-blog-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/bijayata/Downloads/nextjs-firebase-blog-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/bijayata/Downloads/nextjs-firebase-blog-app/pages/blogs/[blogid].js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useState } from 'react';\nimport { db } from '../../firebase';\nimport { useRouter } from 'next/router';\nexport var __N_SSP = true;\nexport default function blogpage(_ref) {\n  _s();\n\n  var _this = this;\n\n  var blog = _ref.blog,\n      user = _ref.user,\n      allComments = _ref.allComments;\n\n  var _useState = useState(''),\n      myComment = _useState[0],\n      setMyComment = _useState[1];\n\n  var _useState2 = useState(allComments),\n      allCommentsBlog = _useState2[0],\n      setAllComments = _useState2[1];\n\n  var router = useRouter();\n  var blogid = router.query.blogid;\n\n  var makeCommet = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var commentQuery;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return db.collection('blogs').doc(blogid).collection('comments').add({\n                text: myComment,\n                name: user.displayName\n              });\n\n            case 2:\n              _context.next = 4;\n              return db.collection('blogs').doc(blogid).collection('comments').get();\n\n            case 4:\n              commentQuery = _context.sent;\n              setAllComments(commentQuery.docs.map(function (docSnap) {\n                return docSnap.data();\n              }));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function makeCommet() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"jsx-3221244238\" + \" \" + \"container center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"jsx-3221244238\",\n      children: blog.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"jsx-3221244238\",\n      children: [\"Created On - \", new Date(blog.createdAt).toDateString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: blog.imageUrl,\n      alt: blog.title,\n      className: \"jsx-3221244238\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"jsx-3221244238\",\n      children: blog.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-3221244238\" + \" \" + \"input-field\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"add a comment\",\n          value: myComment,\n          onChange: function onChange(e) {\n            return setMyComment(e.target.value);\n          },\n          className: \"jsx-3221244238\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick() {\n          return makeCommet();\n        },\n        className: \"jsx-3221244238\" + \" \" + \"btn #0d47a1 blue darken-4\",\n        children: \"Make comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"jsx-3221244238\",\n      children: \"please login to make comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"jsx-3221244238\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-3221244238\" + \" \" + \"left-align\",\n      children: allCommentsBlog.map(function (item) {\n        return /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"jsx-3221244238\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"jsx-3221244238\",\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 48\n          }, _this), \" \", item.text]\n        }, item.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 28\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"3221244238\",\n      children: \"span{font-weight:500;}body{color:blue;}img{width:100%;max-width:500px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2JpamF5YXRhL0Rvd25sb2Fkcy9uZXh0anMtZmlyZWJhc2UtYmxvZy1hcHAvcGFnZXMvYmxvZ3MvW2Jsb2dpZF0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0RpQixBQUdvQyxBQUlwQixBQUVlLFdBRmQsQUFHbUIsS0FObkIsV0FPQSIsImZpbGUiOiIvaG9tZS9iaWpheWF0YS9Eb3dubG9hZHMvbmV4dGpzLWZpcmViYXNlLWJsb2ctYXBwL3BhZ2VzL2Jsb2dzL1tibG9naWRdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt1c2VTdGF0ZX0gZnJvbSAncmVhY3QnXG5pbXBvcnQge2RifSBmcm9tICcuLi8uLi9maXJlYmFzZSdcbmltcG9ydCB7dXNlUm91dGVyfSBmcm9tICduZXh0L3JvdXRlcidcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJsb2dwYWdlKHtibG9nLHVzZXIsYWxsQ29tbWVudHN9KSB7XG5cbiAgICAgY29uc3QgW215Q29tbWVudCxzZXRNeUNvbW1lbnRdID0gdXNlU3RhdGUoJycpXG4gICAgIGNvbnN0IFthbGxDb21tZW50c0Jsb2csc2V0QWxsQ29tbWVudHNdID0gdXNlU3RhdGUoYWxsQ29tbWVudHMpXG4gICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpXG4gICAgIGNvbnN0IHsgYmxvZ2lkIH0gPSByb3V0ZXIucXVlcnlcbiAgICAgY29uc3QgbWFrZUNvbW1ldCA9IGFzeW5jICgpPT57XG4gICAgICAgXG4gICAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2Jsb2dzJykuZG9jKGJsb2dpZCkuY29sbGVjdGlvbignY29tbWVudHMnKS5hZGQoe1xuICAgICAgICAgICAgIHRleHQ6bXlDb21tZW50LFxuICAgICAgICAgICAgIG5hbWU6dXNlci5kaXNwbGF5TmFtZVxuICAgICAgICAgfSlcbiAgICAgICAgY29uc3QgY29tbWVudFF1ZXJ5ID0gYXdhaXQgZGIuY29sbGVjdGlvbignYmxvZ3MnKS5kb2MoYmxvZ2lkKS5jb2xsZWN0aW9uKCdjb21tZW50cycpLmdldCgpXG4gICAgICAgIHNldEFsbENvbW1lbnRzKGNvbW1lbnRRdWVyeS5kb2NzLm1hcChkb2NTbmFwPT5kb2NTbmFwLmRhdGEoKSkpXG5cbiAgICAgfVxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIGNlbnRlclwiPlxuICAgICAgICAgICAgPGgyPntibG9nLnRpdGxlfTwvaDI+XG4gICAgICAgICAgICA8aDU+Q3JlYXRlZCBPbiAtIHtuZXcgRGF0ZShibG9nLmNyZWF0ZWRBdCkudG9EYXRlU3RyaW5nKCl9PC9oNT5cbiAgICAgICAgICAgIDxpbWcgc3JjPXtibG9nLmltYWdlVXJsfSBhbHQ9e2Jsb2cudGl0bGV9IC8+XG4gICAgICAgICAgICA8cD57YmxvZy5ib2R5fTwvcD5cblxuICAgICAgICAgICAge3VzZXI/XG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1maWVsZFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiYWRkIGEgY29tbWVudFwiIFxuICAgICAgICAgICAgICAgIHZhbHVlPXtteUNvbW1lbnR9IFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSk9PnNldE15Q29tbWVudChlLnRhcmdldC52YWx1ZSl9Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gIzBkNDdhMSBibHVlIGRhcmtlbi00XCIgb25DbGljaz17KCk9Pm1ha2VDb21tZXQoKX0+TWFrZSBjb21tZW50PC9idXR0b24+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgIDo8aDM+cGxlYXNlIGxvZ2luIHRvIG1ha2UgY29tbWVudHM8L2gzPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8aHIgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVmdC1hbGlnblwiPlxuXG4gICAgICAgICAgICAgICAge2FsbENvbW1lbnRzQmxvZy5tYXAoaXRlbT0+e1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPGg2IGtleT17aXRlbS5uYW1lfT48c3Bhbj57aXRlbS5uYW1lfTwvc3Bhbj4ge2l0ZW0udGV4dH08L2g2PlxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPlxuICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgc3BhbntcbiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6NTAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib2R5e1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjpibHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGltZ3tcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOjUwMHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgIFxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZXJTaWRlUHJvcHMoe3BhcmFtczp7YmxvZ2lkfX0pIHtcbiAgICAgY29uc3QgcmVzdWx0ID0gIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2Jsb2dzJykuZG9jKGJsb2dpZCkuZ2V0KClcbiAgICAgY29uc3QgYWxsQ29tbWV0c1NuYXAgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdibG9ncycpLmRvYyhibG9naWQpLmNvbGxlY3Rpb24oJ2NvbW1lbnRzJykuZ2V0KClcblxuICAgIGNvbnN0IGFsbENvbW1lbnRzID0gIGFsbENvbW1ldHNTbmFwLmRvY3MubWFwKGNvbURvY1NuYXA9PmNvbURvY1NuYXAuZGF0YSgpKVxuICAgIHJldHVybiB7XG4gICAgICBwcm9wczoge1xuICAgICAgICAgIGJsb2c6e1xuICAgICAgICAgICAgICAuLi5yZXN1bHQuZGF0YSgpLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6cmVzdWx0LmRhdGEoKS5jcmVhdGVkQXQudG9NaWxsaXMoKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsQ29tbWVudHNcbiAgICAgIH0sXG4gICAgfVxuICB9XG5cblxuXG5cbiJdfQ== */\\n/*@ sourceURL=/home/bijayata/Downloads/nextjs-firebase-blog-app/pages/blogs/[blogid].js */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n}\n\n_s(blogpage, \"vhHpJmdZ5g/cIHh60SVFpZxEsTc=\", false, function () {\n  return [useRouter];\n});","map":{"version":3,"sources":["/home/bijayata/Downloads/nextjs-firebase-blog-app/pages/blogs/[blogid].js"],"names":["useState","db","useRouter","blogpage","blog","user","allComments","myComment","setMyComment","allCommentsBlog","setAllComments","router","blogid","query","makeCommet","collection","doc","add","text","name","displayName","get","commentQuery","docs","map","docSnap","data","title","Date","createdAt","toDateString","imageUrl","body","e","target","value","item"],"mappings":"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","sourcesContent":["import {useState} from 'react'\nimport {db} from '../../firebase'\nimport {useRouter} from 'next/router'\nexport default function blogpage({blog,user,allComments}) {\n\n     const [myComment,setMyComment] = useState('')\n     const [allCommentsBlog,setAllComments] = useState(allComments)\n     const router = useRouter()\n     const { blogid } = router.query\n     const makeCommet = async ()=>{\n       \n        await db.collection('blogs').doc(blogid).collection('comments').add({\n             text:myComment,\n             name:user.displayName\n         })\n        const commentQuery = await db.collection('blogs').doc(blogid).collection('comments').get()\n        setAllComments(commentQuery.docs.map(docSnap=>docSnap.data()))\n\n     }\n    return (\n        <div className=\"container center\">\n            <h2>{blog.title}</h2>\n            <h5>Created On - {new Date(blog.createdAt).toDateString()}</h5>\n            <img src={blog.imageUrl} alt={blog.title} />\n            <p>{blog.body}</p>\n\n            {user?\n            <>\n            <div className=\"input-field\">\n                <input type=\"text\" \n                placeholder=\"add a comment\" \n                value={myComment} \n                onChange={(e)=>setMyComment(e.target.value)}/>\n            </div>\n            <button className=\"btn #0d47a1 blue darken-4\" onClick={()=>makeCommet()}>Make comment</button>\n            </>\n            :<h3>please login to make comments</h3>\n            }\n            \n            <hr />\n            <div className=\"left-align\">\n\n                {allCommentsBlog.map(item=>{\n                    return <h6 key={item.name}><span>{item.name}</span> {item.text}</h6>\n                })}\n            </div>\n\n            <style jsx global>\n                {`\n                span{\n                    font-weight:500;\n                }\n                body{\n                    color:blue\n                }\n                img{\n                    width:100%;\n                    max-width:500px;\n                }\n                `}\n            </style>\n            \n        </div>\n    )\n}\n\nexport async function getServerSideProps({params:{blogid}}) {\n     const result =  await db.collection('blogs').doc(blogid).get()\n     const allCommetsSnap = await db.collection('blogs').doc(blogid).collection('comments').get()\n\n    const allComments =  allCommetsSnap.docs.map(comDocSnap=>comDocSnap.data())\n    return {\n      props: {\n          blog:{\n              ...result.data(),\n              createdAt:result.data().createdAt.toMillis()\n          },\n          allComments\n      },\n    }\n  }\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}